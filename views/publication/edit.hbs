{{>navigation}}
<section class="container my-5">
    <form method="POST" action="/list/edit/{{publication.nroPublicacion}}" enctype="multipart/form-data"
        class="needs-validation" novalidate>
        <div class="card">
            <div class="card-body s">
                <h2 class="d-flex justify-content-center">Editar datos de la publicación</h2>
                <div class="form-floating mb-3">
                    <input class="form-control" name="titulo" id="titulo" type="text" placeholder="Titulo"
                        value="{{publication.titulo}}" required>
                    <label for="title">Título del producto</label>
                </div>
                <div class="form-floating mb-3">
                    <textarea class="form-control" name="descripcion" id="descripcion" placeholder="Descripción" maxlength="155" rows="4" style="height:100%;" required>{{publication.descripcion}}</textarea>
                    <label for="desc">Descripción del producto</label>
                </div>
                <input class="form-control" type="file" id="formFile" name="imagen" placeholder="Imagenes" multiple>
                <br>
                <div class="form-floating mb-3">
                    <input class="form-control input-number" name="precio" id="precio" type="number"
                        placeholder="Precio" value="{{publication.precio}}" required>
                    <label for="price">Precio del producto ($)</label>
                </div>
                
                <input type="checkbox" name="confirm-descuento" id="confirm-descuento">
                {{#if publication.porcentaje}}
                <label for="confirm-descuento">Cambiar descuento</label>
                {{else}}
                <label for="confirm-descuento">Añadir descuento</label>
                {{/if}}
                <div class="form-floating mb-3">
                    <input class="form-control input-number" name="descuento" id="descuento" type="number"
                        placeholder="Descuento" onKeyPress="if(this.value.length==2) return false;" 
                        {{#if publication.porcentaje}}
                        value="{{publication.porcentaje}}" required
                        {{/if}}>
                    <label for="descuento">Descuento del producto (%)</label>
                    <br>
                    {{!-- <input class="form-control" value="" name="" id="" type="text" placeholder=""> --}}
                    <h3>Caracteristicas del producto</h3>
                    <div class="mb-3">
                        <div class="mb-3">
                            <input type="text" class="form-control text-uppercase" list="categoria" name="categoria" {{#if msjCat}} placeholder="{{msjCat}}" value=""{{else}} placeholder="SELECCIONE UNA CATEGORIA" value="{{product.categoria}}"{{/if}} required/>
                            <datalist name="categoria" id="categoria">
                                <option value="{{product.categoria}}">{{product.categoria}}</option>
                                {{#each categorias}}
                                <option class="text-capitalize" value="{{categoria}}">{{categoria}}</option>
                                {{/each}}
                            </datalist>
                        </div>
                        <div class="mb-3">
                            <select class="form-select text-uppercase" name="genero" id="genero" required>
                                <option value="{{genero}}" selected>{{genero}}</option>
                                {{#ifCond genero '!=' 'Hombre'}}
                                <option value="Hombre">Hombre</option>
                                {{/ifCond}}
                                {{#ifCond genero '!=' 'Mujer'}}
                                <option value="Mujer">Mujer</option>
                                {{/ifCond}}
                                {{#ifCond genero '!=' 'Unisex'}}
                                <option value="Unisex">Unisex</option>
                                {{/ifCond}}
                            </select>
                        </div>
                        <div class="mb-3">
                            <input type="text" class="form-control text-uppercase" list="material" name="material" {{#if msjMat}} placeholder="{{msjMat}}" value=""{{else}} placeholder="SELECCIONE UN MATERIAL" value="{{product.material}}"{{/if}} required/>
                            <datalist name="material" id="material" required>
                                <option value="{{product.material}}">{{product.material}}</option>
                                {{#each materiales}}
                                    <option value="{{material}}">{{material}}</option>
                                {{/each}}
                            </datalist>
                        </div>
                        <input type="text" class="form-control text-uppercase" list="marca" name="marca" placeholder="SELECCIONE O INGRESE UNA MARCA" value="{{product.marca}}" required/>
                        <datalist name="marca" id="marca" required>
                            <option value="{{product.marca}}">{{product.marca}}</option>
                            {{#each marcas}}
                                <option value="{{marca}}">{{marca}}</option>
                            {{/each}}
                        </datalist>
                        {{!-- <div>
                            <select class="form-select" name="colores" id="colores">
                                <option value="0">Seleccione un color</option>
                                {{#each colores}}
                                <option value="{{color}}">{{color}}</option>
                                {{/each}}
                            </select>
                            <button type="button" class="btn btn-success" name="addColor" id="addColor">Agregar
                                color</button>
                            <p id="textColores">Aquí apareceran los colores</p>
                        </div> --}}
                    </div>
                    <h3>Selección de talles</h3> 
                    <div class="my-3">
                        {{#if tallesSelected}}
                        {{#each tallesSelected}}
                       <div class="form-check d-inline m-0 p-0">
                            <input type="checkbox" class="btn-check" name="{{talle}}" id="btn-{{talle}}"
                                autocomplete="off">
                            <label class="btn btn-outline-dark btn-lg shadow-none" for="btn-{{talle}}"
                                style="width: 100px;">{{talle}}</label>
                        </div>
                        {{/each}}
                        {{/if}}
                        {{#each talles}}
                       <div class="form-check d-inline m-0 p-0">
                            <input type="checkbox" class="btn-check" name="{{talle}}" id="btn-{{talle}}"
                                autocomplete="off">
                            <label class="btn btn-outline-dark btn-lg shadow-none" for="btn-{{talle}}"
                                style="width: 100px;">{{talle}}</label>
                        </div>
                        {{/each}}
                    </div>
                    <h3>Selección de colores</h3> 
                    <div class="my-3">
                        {{#if colorSelected}}
                        {{#each colorSelected}}
                        <div class="form-check d-inline m-0 p-0">
                            <input type="checkbox" name="{{color}}" id="btn-{{color}}"
                                autocomplete="off" checked>
                            <label class="btn btn-outline-dark btn-lg" for="btn-{{color}}"
                                style="width: 100px;" id="btn-{{color}}">ㅤㅤ</label>
                        </div>
                        {{/each}}
                        {{/if}}
                        {{#each colores}}
                        <div class="form-check d-inline m-0 p-0">
                            <input type="checkbox" value="{{color}}" name="{{color}}">
                            <label class="btn btn-outline-dark btn-lg" for="btn-{{color}}" style="width: 100px;" id="btn-{{color}}">ㅤㅤ</label>
                        </div>
                        {{/each}}
                    </div>
                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <button type="submit" class="btn btn-success"><i class="fas fa-check"></i> Aplicar
                            Cambios</button>
                        <button type="reset" class="btn btn-danger btn"><i class="fas fa-trash"></i> Descartar</button>
                    </div>
                    {{#if message }}
                    <p class="text-danger text-center mt-1">{{message}}</p>
                    {{/if}}

    </form>

</section>
<script>
    (function () {
        'use strict';
        window.addEventListener('load', function () {
            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            var forms = document.getElementsByClassName('needs-validation');
            // Loop over them and prevent submission
            var validation = Array.prototype.filter.call(forms, function (form) {
                form.addEventListener('submit', function (event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();
</script>